      <!-- Breadcrumb-->
      <ol class="breadcrumb">
          <li class="breadcrumb-item"><a routerLink="/stafflist">Home</a></li>
          <li class="breadcrumb-item"><a routerLink="/stafflist">Staff</a></li>
          <li class="breadcrumb-item"> Add Staff</li>
        </ol> 
        <div class="container-fluid">
            <div id="ui-view">
<div class="card border-0 shadow rounded-0">
    <div class="card-body">
    <form [formGroup]="registerStaffForm" (ngSubmit)="onSubmit(courseTemplate)">
      <div class="form-group">
          <h5 >Personal Info </h5>
                <div class="row">    
                        <div class=" form-group col-sm-3">
                            <label for="Title">Title</label>
                            <select id="Gender" formControlName="Gender" [value]="null" class="form-control text-muted" [ngClass]="{ 'is-invalid': submitted && f.Gender.errors }">
                            <option [value]="null" disabled hidden>Select Title</option>
                            <option value="Male">MR.</option>
                            <option value="Female">Mrs.</option>
                            <option value="Female">Miss</option>
                          </select>
                          <div *ngIf="submitted && f.Gender.errors" class="invalid-feedback">
                            <div *ngIf="f.Gender.errors.required">Gender is required</div>
                          </div>
                        </div>

                        <div class="form-group col-sm-3">
                            <label for="FirstName">First Name</label>
                            <input type="text" class="form-control" placeholder="Enter First Name" formControlName="FirstName"
                            [ngClass]="{ 'is-invalid': submitted && f.FirstName.errors }">
                          <div *ngIf="submitted && f.FirstName.errors" class="invalid-feedback">
                            <div *ngIf="f.FirstName.errors.required">First Name is required</div>
                          </div>
                        </div>

                        <div class="form-group col-sm-3">
                            <label for="MiddleName">Middle Name</label>
                            <input type="text" class="form-control" placeholder="Enter Middle Name" formControlName="MiddleName"
                            [ngClass]="{ 'is-invalid': submitted && f.MiddleName.errors }">
                          <div *ngIf="submitted && f.MiddleName.errors" class="invalid-feedback">
                            <div *ngIf="f.MiddleName.errors.required">Middle Name is required</div>
                          </div>
                        </div>

                        <div class="form-group col-sm-3">
                            <label for="LastName">Last Name</label>
                            <input type="text" class="form-control" placeholder="Enter Last Name" formControlName="LastName"
                            [ngClass]="{ 'is-invalid': submitted && f.LastName.errors }">
                          <div *ngIf="submitted && f.LastName.errors" class="invalid-feedback">
                            <div *ngIf="f.LastName.errors.required">Last Name is required</div>
                          </div>
                        </div>
                </div>
              <div class="form-row">
                <div class="form-group col-sm-3">
                  <label class="col-md-6 control-label">Date of Birth</label>
                  <input type="text" id="DOB" onfocus="(this.type='date')"  class="form-control" formControlName="DOB" placeholder="Enter Date of Birth"
                    [ngClass]="{ 'is-invalid': submitted && f.DOB.errors }">
                  <div *ngIf="submitted && f.DOB.errors" class="invalid-feedback">
                    <div *ngIf="f.DOB.errors.required"> Please provide a valid DOB.</div>
                  </div>
                </div>
                <div class="form-group col-sm-3">
                   <label for="BloodGroup">Blood Group</label>
                  <select id="BloodGroup" class="form-control text-muted" [value]="null" formControlName="BloodGroup"
                    [ngClass]="{ 'is-invalid': submitted && f.BloodGroup.errors }">
                    <option [value]="null"  disabled hidden>Select Blood Group</option>
                    <option>A+</option>
                    <option>B+</option>
                    <option>AB+</option>
                    <option>O+</option>
                    <option>A-</option>
                    <option>B-</option>
                    <option>O-</option>
                    <option>AB-</option>
                  </select>
                  <div *ngIf="submitted && f.BloodGroup.errors" class="invalid-feedback">
                    <div *ngIf="f.BloodGroup.errors.required"> Please provide a valid BloodGroup.</div>
                  </div>
                </div>
              </div>
            </div>
            <hr>

<div class="form-group">
          <h5 >Contact Info </h5>
          <div class="row">
                <div class="form-group col-sm-3">
                    <label for="ContactNo">ContactNo</label>
                  <input type="text" id="ContactNo" minlength="0" maxlength="10" formControlName="ContactNo" placeholder="Enter Contact No"
                    class="form-control"  pattern="^[7-9][0-9]{9}$" [ngClass]="{ 'is-invalid': submitted && f.ContactNo.errors }">
                  <div *ngIf="submitted && f.ContactNo.errors" class="invalid-feedback">
                    <div *ngIf="f.ContactNo.errors.required">Contact No is required</div>
                    <div *ngIf="f.ContactNo.errors.pattern">Contact No not correct</div> </div>
                </div>

                <div class="form-group col-sm-3">
                    <label for="EmergencyNo">EmergencyNo</label>
                  <input type="number" id="EmergencyNo" minlength="0" maxlength="10" formControlName="EmergencyNo" placeholder="Enter Emergency Contact No"
                    class="form-control"  pattern="^[7-9][0-9]{9}$" [ngClass]="{ 'is-invalid': submitted && f.EmergencyNo.errors }">
                  <div *ngIf="submitted && f.EmergencyNo.errors" class="invalid-feedback">
                    <div *ngIf="f.EmergencyNo.errors.required">Emergency Contact No is required</div>
                    <div *ngIf="f.EmergencyNo.errors.pattern">Emergency Contact No not correct</div>
                  </div>
                </div>

                <div class="form-group col-sm-3">
                    <label for="Email">Email</label>
                  <input type="email" class="form-control" id="Email" placeholder="Enter Email" formControlName="Email"
                    [ngClass]="{ 'is-invalid': submitted && f.Email.errors }" (blur)="validatingExistingUserEmail(f.Email.value)">
                  <div *ngIf="submitted && f.Email.errors" class="invalid-feedback">
                    <div *ngIf="f.Email.errors.required">Email is required</div>
                    <div *ngIf="f.Email.errors.email">Email must be a valid email address</div>
                  </div>
                  <div *ngIf="chkEmailId > 0"><h6 style="color:#f86c6b">Please enter another Email as this is already registered.</h6></div>
                </div>
              </div>
            </div>
            <hr>
 
    <div class="form-group">
                <h5>Permanent Address </h5>
          <div class="row">
                <div class="form-group col-sm-3">
                    <label for="Address">Address</label>
                  <input type="text" class="form-control" id="Address1" placeholder="Enter Address"
                    formControlName="Address1" [ngClass]="{ 'is-invalid': submitted && f.Address1.errors }">
                  <div *ngIf="submitted && f.Address1.errors" class="invalid-feedback">
                    <div *ngIf="f.Address1.errors.required">Address is required</div>
                  </div>
                </div>
                <div class="form-group col-sm-3">
                    <label for="State">State</label>
                  <select id="State" class="form-control" [value]="null" formControlName="State"
                    [ngClass]="{ 'is-invalid': submitted && f.State.errors }">
                    <option  [value]="null" disabled hidden>Select State</option>
                    <option value="Maharashtra">Maharashtra</option>
                  </select>
                  <div *ngIf="submitted && f.State.errors" class="invalid-feedback">
                    <div *ngIf="f.State.errors.required"> Please provide a valid state.</div>
                  </div>
                </div>

                <div class="form-group col-sm-3">
                    <label for="City">City</label>
                  <input type="text" class="form-control" id="City" formControlName="City" value="Pune"
                    placeholder="Enter City" [ngClass]="{ 'is-invalid': submitted && f.City.errors }">
                  <div *ngIf="submitted && f.City.errors" class="invalid-feedback">
                    <div *ngIf="f.City.errors.required"> Please provide a valid city.</div>
                  </div>
                </div>
            
              <div class="form-group col-sm-3">
                  <label for="ZipCode">ZipCode</label>
                <input type="number" class="form-control" id="ZipCode" formControlName="ZipCode" value="411040"
                  placeholder="Enter ZipCode" [ngClass]="{ 'is-invalid': submitted && f.ZipCode.errors }">
                <div *ngIf="submitted && f.ZipCode.errors" class="invalid-feedback">
                  <div *ngIf="f.ZipCode.errors.required"> Please provide a valid Zip Code.</div>
                </div>
              </div>
            </div>
          </div>
          <hr>

<div class="form-group">
          <h5>Current Address</h5>
      <div class="row">
            <div class="form-group col-md-6 ml-4">
              <input class="form-check-input " type="checkbox" id="gridCheck1" (click)="checkAll($event)"
                formControlName="gridCheck1">
              <label class="form-check-label" for="gridCheck1">
                Same as above
              </label>
            </div>
          </div>

          <div class="row">
                <div class="form-group col-sm-3">
                    <label for="Address">Address</label>
                  <input type="text" class="form-control" id="P_Address1" placeholder="Enter Address"
                    formControlName="P_Address1" [ngClass]="{ 'is-invalid': submitted && f.P_Address1.errors }">
                  <div *ngIf="submitted && f.Address1.errors" class="invalid-feedback">
                    <div *ngIf="f.P_Address1.errors.required">Address is required</div>
                  </div>
                </div>
                <div class="form-group col-sm-3">
                    <label for="State">State</label>
                  <select id="P_State" class="form-control" [value]="null" formControlName="P_State"
                    [ngClass]="{ 'is-invalid': submitted && f.P_State.errors }">
                     <option [value]="null" disabled hidden>Select State</option>
                    <option value="Maharashtra">Maharashtra</option>
                  </select>
                  <div *ngIf="submitted && f.P_State.errors" class="invalid-feedback">
                    <div *ngIf="f.P_State.errors.required"> Please provide a valid state.</div>
                  </div>
                </div>
                <div class="form-group col-sm-3">
                    <label for="City">City</label>
                  <input type="text" class="form-control" id="City" formControlName="P_City" value="Pune"
                    placeholder="Enter City" [ngClass]="{ 'is-invalid': submitted && f.City.errors }">
                  <div *ngIf="submitted && f.P_City.errors" class="invalid-feedback">
                    <div *ngIf="f.P_City.errors.required"> Please provide a valid city.</div>
                  </div>
                </div>
                <div class="form-group col-sm-3">
                    <label for="ZipCode">ZipCode</label>
                  <input type="number" class="form-control" id="ZipCode" formControlName="P_ZipCode" value="411040"
                    placeholder="Enter ZipCode" [ngClass]="{ 'is-invalid': submitted && f.ZipCode.errors }">
                  <div *ngIf="submitted && f.P_ZipCode.errors" class="invalid-feedback">
                    <div *ngIf="f.P_ZipCode.errors.required"> Please provide a valid STD Code.</div>
                  </div>
                </div>
              </div>
            </div>
<hr>
              <div class="form-group">
                  <h5>Professional Details </h5>
                  <div class="row">
                        <div class="form-group col-sm-4">
                          <div class="media">
                            <img class="img-circle mr-3"
                              [src]=_DomSanitizationService.bypassSecurityTrustUrl(thumbnailUrl)
                              width="80px" height="80px">
        
                            <div class="media-body">
                                <label for="inpuIsCV">Upload Photo</label>
                                    <input type="file" (change)="onImageSelected($event);onUploadPhoto()" id="Photo">
                                    <input type="hidden" name="fileHidden" formControlName="Photo" />
                                
  </div>
                  </div>
                </div>
                <div class="form-group col-sm-3">
                    <label for="inpuIsCV">Upload CV</label>
                    <input type="file" formControlName="Document" id="customFile" (change)="onFileSelected($event);onUploadFile()">
                </div>
              </div>

              <div class="row">
                  <div class="form-group col">
                    <label for="inputIsFixedPayemnt" class="h6">Is Fixed Payment?</label>
                    <div class="custom-control custom-radio custom-control-inline ml-4">
                      <input type="radio" class="custom-control-input" id="inputIsFixedPayemnt1" value="true"
                        name="IsFixedPayment" formControlName="IsFixedPayment" [checked]="true">
                      <label class="custom-control-label" for="inputIsFixedPayemnt1">Yes</label>
                    </div>
                    <div class="custom-control custom-radio custom-control-inline">
                      <input type="radio" class="custom-control-input" id="inputIsFixedPayemnt2" value="false"
                        name="IsFixedPayment" formControlName="IsFixedPayment">
                      <label class="custom-control-label" for="inputIsFixedPayemnt2">No</label>
                    </div>
                  </div>
                </div>

                <hr>
                <h5> Previous Work Details </h5>
                <div class="form-group">
                    <div class="row">
                      <div class="col-md-4">
                          <label for="PreviousWorkName">Previous Work Name </label>
                          <input type="text" class="form-control" id="PreviousWorkName" formControlName="PreviousWorkName">
                        </div>
                        <div class="col-md-4">
                            <label for="DateOfJoining">Date of Joining </label>
                            <input type="date" class="form-control" id="DateOfJoining" formControlName="DateOfJoining">
                          </div>
                          <div class="col-md-4">
                              <label for="DateOfLeaving">Date of Leaving </label>
                              <input type="date" class="form-control" id="DateOfLeaving" formControlName="DateOfLeaving">
                            </div>
                        </div>
                </div>
                <div class="form-group">
                    <label for="PreviousExperience">Previous Experience</label>
                    <div class="row">
                    <div class="col-md-4">
                    <input type="number" class="form-control" id="PreviousExperience"
                        formControlName="PreviousExperience">
                      </div>
                    </div>
                </div>
                
              </div>
      <div class="modal-footer">
          <button class="btn btn-primary btn-square ml-2 " type="submit">Submit</button>
          <a routerLink="/stafflist" class="btn btn-danger btn-square ml-2">      
            Cancel</a>
        </div>
    </form>
  </div>
  </div>
  </div>
  </div>

 <ng-template #courseTemplate>
  <form [formGroup]="courseForm" (ngSubmit)="onAddCourses(staffLoginTemplate)">
    <div class="modal-header">
      <h6 class=" h6 modal-title pull-left">Add Course Details</h6>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-md-12 ">  
              <div class="row">
                <div class="col-md-12">
                  <div class="form-row">
  
                    <div class="form-group col-md-4 px-3">
                        <select id="CourseType" class="form-control" [value]="'default'" formControlName="CourseType"
                        (change)="selectCourseType($event)" [ngClass]="{ 'is-invalid': submitted && cf.CourseType.errors }">
                        <option [value]="'default'" disabled hidden>Course Type</option>
                        <option *ngFor="let courseType of  CourseTypeList"
                          [value]="courseType.CourseTypeId">
                          {{courseType.CourseTypeName}}
                        </option>
                      </select>
                      <div *ngIf="submitted && cf.CourseType.errors" class="invalid-feedback">
                          <div *ngIf="cf.CourseType.errors.required"> Please provide a valid Date.</div>
                        </div>
                    </div>

                    
                    <div class="form-group col-md-4 px-3">
                        <select id="CourseName" class="form-control" [value]="null" formControlName="CourseName"
                        (change)="selectCourseName($event); getSalaryFromCourseName($event)" [ngClass]="{ 'is-invalid': submitted && cf.CourseName.errors }">
                        <option [value]="null" disabled hidden>CourseName</option>
                        <option *ngFor="let courselist of courseNameList"
                          [value]="courselist.CourseId">
                          {{courselist.CourseName}}</option>
                      </select>
                      <div *ngIf="submitted && cf.CourseName.errors" class="invalid-feedback">
                          <div *ngIf="cf.CourseName.errors.required"> Please provide a valid Date.</div>
                        </div>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group col-md-3 mt-3 px-3">
                        
                        <div class="form-group col-md-4" *ngIf="!IsFixedPayment;then  thenBlock else elseBlock">    
                          </div>        
                              <ng-template #thenBlock>
                                 <div *ngFor="let s of Salary"> 
                                   <input  type="text" id="Salary" class="form-control" formControlName="Salary" placeholder="Salary" [ngClass]="{ 'is-invalid': submitted && cf.Salary.errors }">
                                 </div>
                              </ng-template>
                             
                          <ng-template #elseBlock>
                              <input  type="text" id="Salary" class="form-control" formControlName="Salary" [ngClass]="{ 'is-invalid': submitted && cf.Salary.errors }">
                             </ng-template>

                             <div *ngIf="submitted && cf.Salary.errors" class="invalid-feedback">
                                <div *ngIf="cf.Salary.errors.required"> Please provide a Salary.</div>
                              </div>
                    
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary btn-square ml-2" id="submitCourse" type="submit">Submit</button>
          <button class="btn btn-danger btn-square ml-2" type="button" data-dismiss="modal"
            (click)="modalRef.hide()">Cancel</button>
    </div>
  </form>
</ng-template>


<ng-template #staffLoginTemplate>
  <div data-keyboard="false" data-backdrop="static" aria-hidden="true">
    <form [formGroup]="staffLoginForm" (ngSubmit)="onStaffLogin()">
      <div class="modal-header">
        <h5 class=" h5 modal-title pull-left">Create Password</h5>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <table>
          <tr>
            <td colspan="1">
              <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="inputAddress2">Enter New Password</label>
                </div>
                <div class="form-group col-md-6">
                  <input type="password" class="form-control" id="CreatePassword" formControlName="Password"
                    [ngClass]="{ 'is-invalid': submitted && login.Password.errors }">
                </div>
                <div *ngIf="submitted && login.Password.errors" class="invalid-feedback">
                  <div *ngIf="login.Password.errors.required">Password is required</div>
                </div>
              </div>
            </td>
          </tr>
          <tr>
            <td colspan="1">
              <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="inputAddress2">Verify Password</label>
                </div>
                <div class="form-group col-md-6">
                  <input type="password" class="form-control" id="VerifyPassword" formControlName="VerifyPassword"
                    [ngClass]="{ 'is-invalid': submitted && login.VerifyPassword.errors }">
                </div>
                <div class="form-group col-md-6">
                  <div *ngIf="submitted && login.VerifyPassword.errors" class="invalid-feedback">
                    <div *ngIf="login.VerifyPassword.errors.required">Confirm Password required</div>
                    <div *ngIf="login.VerifyPassword.errors.mismatch">Password not matched</div>
                  </div>
                </div>
              </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="modal-footer">
          <button class="btn btn-primary btn-square ml-2" id="submitLogin" type="submit">Submit</button>
          <button class="btn btn-danger btn-square ml-2" type="button"
            (click)="modalRef.hide()">Cancel</button>
      </div>
    </form>
  </div>
</ng-template> 