<app-authorised-top-nav></app-authorised-top-nav>

<div class="row">
<div class="col-md-2">

<app-authorised-side-nav></app-authorised-side-nav>
</div> 


<div class="col-md-10">
<div class="row mb-4 px-0">
<div class="col-md-10 mt-4 ">
<a routerLink="/Dashboard" class="ml-3 pt-1 text-dark" data-toggle="tooltip" data-placement="bottom" title="home">
Home</a>&nbsp;
<i class="fa fa-angle-double-right" aria-hidden="true"></i>
<a routerLink="/FeesCollectionReport" class="ml-3 pt-1 text-dark" data-toggle="tooltip" data-placement="bottom"
title="FeesCollectionReport">
FeesCollectionReport</a>&nbsp;
</div>
</div>
<hr>

<form [formGroup]="registerFeesCollectionReport" (ngSubmit)="pullFeesCollectionReport()">
<div class="row">
<div class="col-lg-12 py-2">
<h2 class="ml-4">Fees Collection Report</h2>
</div>
</div>

<div class="row shadow p-5 m-3">
<div class="col-lg-12 py-2">
<div class="form-row ">
<div class="col-lg-2">
<label class="h6 text-muted">Branch Name:</label>
</div>
<div class="col-lg-2"> 
<select class="form-control" formControlName="branchId">
<option *ngFor="let b of branchList" [value]="b.BranchId">{{b.BranchName}}</option>
</select>
</div>
<div class="col-lg-2">
<label class="h6 text-muted mt-3">Course</label>
</div>
<div class="col-lg-2">
<select class="form-control" formControlName="courseId">
<option *ngFor="let c of courseList" [value]="c.CourseId">{{c.ShortName}}</option>
</select>
</div> 

</div>

<div class="form-row py-3">
<div class="col-lg-2">
<label class="h6 text-muted mt-3">Select Period:</label>
</div>
<div class="col-lg-3">
<select class="form-control" formControlName="period" (change)="selectPeriod($event)">
<option value="OneMonth" >Last 1 Month</option>
<option value="ThreeMonth" >Last 3 Month</option>
<option value="SixMonth" >Last 6 Month</option>
<option value="SelectDateRange" >Select Date Range</option>
</select>
</div>

</div>

<div class="form-row py-3 ">
<div class="col-lg-2" *ngIf="dateRange">
<label class="h6 text-muted mt-3">From Date:</label>
</div>
<div class="col-lg-3" *ngIf="dateRange" >

<input type="date" class="form-control" formControlName="FromDate"
[ngClass]="{ 'is-invalid': submitted && f.FromDate.errors }">
<div *ngIf="submitted && f.FromDate.errors" class="invalid-feedback">
<div *ngIf="f.FromDate.errors.required">Date is required</div>
</div>
</div> 


<div class="col-lg-1" *ngIf="dateRange">
<label class="h6 text-muted mt-3">To Date:</label>
</div>
<div class="col-lg-3" *ngIf="dateRange"> 
<input type="date" class="form-control" formControlName="ToDate"
[ngClass]="{ 'is-invalid': submitted && f.ToDate.errors }">
<div *ngIf="submitted && f.ToDate.errors" class="invalid-feedback">
<div *ngIf="f.ToDate.errors.required">Date is required</div>
</div>
</div>

</div> 
<div class="row justify-content-end border-top">
<div class="col-lg-7 mt-3">

<button type="submit" value="Search" class="btn btn-info btn-lg py-1 pr-3 rounded-0 f-20">Search</button>
<button type="button" class="btn btn-dark btn-lg py-1 pr-3 rounded-0 f-20 ml-4" value="Export Excel"
(click)="exportAsXLSX()">Export Excel</button>
<button type="button" (click)="pdf.saveAs('FeesCollectionReport.pdf')" value="Download PDF" class="btn btn-dark btn-lg py-1 pr-3 rounded-0 f-20 ml-4">Download PDF</button>
</div> 

</div>








</div>
</div>
</form>


<div class="shadow p-5 m-3">
<kendo-pdf-export #pdf paperSize="A4" margin="1cm">
<div class="row">
<div class="col-lg-7 m-3">
<h4>Fees Collection Report</h4>
</div>
</div>
<table style="border:1px solid black; width: 100%">
<tr style="border:1px solid black">
<th>Student Name</th>
<!-- <th>Branch Name</th> -->
<th>Course Name</th>
<th>Total Fees</th>
<th>Pending Fees</th>
<th>Fees Paid</th>
<!-- <th>Discount</th> -->
<th>Payment Date</th>
</tr>
<tr *ngFor="let f of feesReportList | paginate: { itemsPerPage: 25, currentPage: p }"
style="border:1px solid black">
<td>{{f.StudentName}}</td>
<!-- <td>{{f.BranchName}}</td> -->
<td>{{f.CourseName}}</td>
<td>{{f.TotalFees}}</td>
<td>{{f.PendingFees}}</td>
<td>{{f.FeesPaid}}</td> 
<!-- <td>{{f.Discount}}</td> -->
<td>{{f.DateOfPayment | date}}</td>
</tr>
</table>
</kendo-pdf-export>
<ul class="pagination">
<pagination-controls (pageChange)="p = $event"></pagination-controls>
</ul>
</div>
</div>




