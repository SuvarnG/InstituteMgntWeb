<!-- Breadcrumb-->
<ol class="breadcrumb">
    <div class="flex-1 d-inline-flex">
  <li class="breadcrumb-item active align-self-center"><a routerLink="/Dashboard">Home</a></li>
  <li class="breadcrumb-item active align-self-center"><a routerLink="/reports">Reports</a></li>
  <li class="breadcrumb-item align-self-center">Enquiry Report</li>
</div>
<div class="d-none d-md-block d-lg-block d-xl-block flex-1">
    <li class="h5 pt-2">Manage Enquiry Reports</li> 
  </div>
  <li class="breadcrumb-menu d-md-down-none flex-1 justify-content-end text-right">   
    </li>
</ol>

<form [formGroup]="registerEnquiryReport" (ngSubmit)="pullEnquiryReport()">
  <div class="container-fluid">
    <div id="ui-view">
      <div class="card border-0 shadow rounded-0">
        <div class="card-body">
          <div class="row">
            <div class="col-lg-12 py-2">
              <div class="form-row ">

                <div class="col-lg-2">
                  <div class="row">
                    <div class="col-lg-12">
                      <label>Branch</label>
                    </div>
                    <div class="col-lg-12">
                      <select class="form-control" [value]="null" formControlName="BranchName">
                        <option value="null" disabled hidden>Select Branch</option>
                        <option *ngFor="let b of branchList" [value]="b.BranchId">{{b.BranchName}}</option>
                      </select>
                    </div>
                  </div>
                </div>


                <div class="col-lg-2">
                  <div class="row">
                    <div class="col-lg-12">
                      <label>Course</label>
                    </div>
                    <div class="col-lg-12">
                      <select class="form-control" [value]="null" formControlName="CourseName">
                        <option value="null" disabled hidden>Select Course</option>
                        <option *ngFor="let c of courseList" [value]="c.CourseId">{{c.ShortName}}</option>
                      </select>
                    </div>
                  </div>
                </div>

                <div class="col-lg-2">
                  <div class="row">
                    <div class="col-lg-12">
                      <label>Period</label>
                    </div>
                    <div class="col-lg-12">
                      <select class="form-control" [value]="null" formControlName="period"
                        (change)="selectPeriod($event)" [ngClass]="{ 'is-invalid': submitted && f.period.errors }">
                        <option value="null" disabled hidden>Select Period</option>
                        <option value="OneMonth">Last 1 Month</option>
                        <option value="ThreeMonth">Last 3 Month</option>
                        <option value="SixMonth">Last 6 Month</option>
                        <option value="SelectDateRange">Date Range</option>
                      </select>
                      <div *ngIf="submitted && f.period.errors" class="invalid-feedback">
                        <div *ngIf="f.period.errors.required">Period is required</div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-lg-2" *ngIf="dateRange">
                  <div class="col-lg-12">
                    <label>From</label>
                  </div>
                  <div class="col-lg-12">
                    <input type="date" class="form-control" formControlName="FromDate"
                      [ngClass]="{ 'is-invalid': submitted && f.FromDate.errors }">
                    <div *ngIf="submitted && f.FromDate.errors" class="invalid-feedback">
                      <div *ngIf="f.FromDate.errors.required">Date is required</div>
                    </div>
                  </div>

                </div>

                <div class="col-lg-2" *ngIf="dateRange">
                  <div class="row">
                    <div class="col-lg-12">
                      <label>To</label>
                    </div>
                    <div class="col-lg-12">
                      <input type="date" class="form-control" formControlName="ToDate"
                        [ngClass]="{ 'is-invalid': submitted && f.ToDate.errors }">
                      <div *ngIf="submitted && f.ToDate.errors" class="invalid-feedback">
                        <div *ngIf="f.ToDate.errors.required">Date is required</div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-lg-1">
                  <div class="row">
                    <div class="col-lg-12">
                    </div>
                    <div class="col-lg-12">
                      <button type="submit" value="Search" class="btn btn-square btn-primary mt-4">Search</button>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>


            <div class="row justify-content-end mr-2 mt-1">

              <a class="button" (click)="exportAsXLSX()" title="Export Excel"><i class="fa fa-file-excel-o fa-1.5x"
                  style="color:#008000" aria-hidden="true"></i></a>
              &nbsp;&nbsp;
              <a class="button" (click)="pdf.saveAs('enquiryTable_.pdf')" title="Download PDF"><i
                  class="fa fa-file-pdf-o fa-1.5x" style="color:red" aria-hidden="true"></i></a>

              <!-- <button type="button" class="btn btn-dark btn-lg py-1 pr-3 rounded-0 f-20 ml-4" value="Export Excel"
          (click)="exportAsXLSX()">Export Excel</button>
        <button type="button" (click)="pdf.saveAs('enquiryTable_.pdf')" value="Download PDF"
          class="btn btn-dark btn-lg py-1 pr-3 rounded-0 f-20 ml-4">Download PDF</button> -->
            </div>
            <kendo-pdf-export #pdf paperSize="A4" margin="1cm">
                <table class="table table-striped">
                  <tr>
                    <th>Branch Name</th>
                    <th>Enquirer Name</th>
                    <th>Course Name</th>
                    <th>Address</th>
                    <th>City</th>
                    <th>Date Of Enquiry</th>
                  </tr>
                  <tr *ngFor="let e of enquiryReportList | paginate: { itemsPerPage: 8, currentPage: p }">
                    <td>{{e.BranchName}}</td>
                    <td>{{e.EnquirerName}}</td>
                    <td>{{e.CourseName}}</td>
                    <td>{{e.Address}}</td>
                    <td>{{e.City}}</td>
                    <td>{{e.DateOfEnquiry | date}}</td>
                  </tr>
                </table>
            </kendo-pdf-export>
            <ul class="pagination"  *ngIf="enquiryReportList">
              <pagination-controls (pageChange)="p = $event"></pagination-controls>
            </ul>



        </div>
      </div>
    </div>
  </div>
</form>