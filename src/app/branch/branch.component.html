<!-- Breadcrumb-->
    <ol class="breadcrumb">
        <div class="flex-1 d-inline-flex">
      <li class="breadcrumb-item align-self-center"><a routerLink="/Dashboard">
          Home</a></li>
      <li class="breadcrumb-item align-self-center">Branches</li>
</div>
<div class="d-none d-md-block d-lg-block d-xl-block flex-1">
    <li class="h5 pt-2">Manage Branch Information</li>
  </div>
      <!-- Breadcrumb Menu-->
      <li class="breadcrumb-menu d-md-down-none flex-1 justify-content-end text-right">
        <div class="btn-group" role="group" aria-label="Button group">

          <button class="btn btn-primary" type="button">
            <i class="fa fa-search text-white"></i></button>

          <input type="text" placeholder="Search" class="form-control" [(ngModel)]="filter">
          &nbsp;&nbsp;
          <a class="btn btn-primary font-weight-medium px-3 py-2  rounded-0 f-20 ml-1 pull-right text-white" data-toggle="tooltip"
            data-placement="bottom" title="Add Branch" (click)="openPopupForNew(NewBranchTemplate)">
            Add
          </a>
        </div>
      </li>
    </ol>

    <div class="container-fluid">
      <div id="ui-view">
        <div class="card border-0 shadow rounded-0">
          <div class="card-body">
            <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="row-border hover tbl">
              <thead>
                <tr>
                  <th class="pl-2">Branch Name</th>
                  <th class="pl-2">Address</th>
                  <th class="pl-2">Contact Number</th>
                  <th class="pl-2">Action</th>
                  
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let branches of branch | filter:filter">
                  <td>{{branches.BranchName}}</td>
                  <td>{{branches.Address}}</td>
                  <td>{{branches.ContactNo}}</td>
                  <td>
                    <a class="card-header-action btn-minimize" (click)="openPopupForEdit(EditBranchTemplate,branches)"
                      title="Edit Information">
                      <i class="cui-pencil"></i>
                    </a>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <a class="card-header-action btn-minimize" (click)="delete(branches.BranchId,branches.BranchName)"
                    title="Delete Information">
                    <i class="cui-trash"></i>
                  </a>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>


<!-- New Branch template -->
<ng-template #NewBranchTemplate>
  <form [formGroup]="createBrachForm" (ngSubmit)="onSubmitCreateBranch()">
    <div class="modal-header">
      <h5 class="modal-title pull-left">Add Branch</h5>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
        <div class="container-fluid">
        <div class="form-group">
            <label for="BankName">Branch Name</label>
            <input type="text" class="form-control" formControlName="BranchName" placeholder="Branch Name"
                    [ngClass]="{ 'is-invalid': submitted && f.BranchName.errors }">
                    <div *ngIf="submitted && f.BranchName.errors" class="invalid-feedback">
                        <div *ngIf="f.BranchName.errors.required">Please Enter Branch Name</div>
                      </div>
            </div>

            <div class="form-group">
                <label for="BankName">Branch Address</label>
                <input type="text" class="form-control" formControlName="Address" placeholder="Branch Address"
                    [ngClass]="{ 'is-invalid': submitted &&
                      f.Address.errors }">
                      <div *ngIf="submitted && f.Address.errors" class="invalid-feedback">
                          <div *ngIf="f.Address.errors.required">Please Enter Branch Address</div>
                        </div>
                </div>

                <div class="form-group">
                    <label for="BankName">Contact Number</label>
                    <input type="text" class="form-control" formControlName="ContactNo" placeholder="Contact Number"
                    [ngClass]="{ 'is-invalid': submitted &&
                  f.ContactNo.errors }">
                  <div *ngIf="submitted && f.ContactNo.errors" class="invalid-feedback">
                      <div *ngIf="f.ContactNo.errors.required">Please Enter contact number</div>
                    </div>
                    </div>

      
    </div>

    <div class="modal-footer">
      <button class="btn btn-square btn-primary" type="submit">Submit</button>
      <button class="btn btn-danger btn-square ml-2" type="button" (click)="onCancel()">Cancel</button>
    </div>
    </div>
  </form>
</ng-template>

<!-- Edit Branch template -->
<ng-template #EditBranchTemplate>
  <form [formGroup]="editBranchForm" (ngSubmit)="onSubmitEditBranch()">
    <div class="modal-header">
      <h5 class="modal-title pull-left">Update Branch</h5>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
        <div class="container-fluid">
        <div class="form-group">
            <label for="BankName">Branch Name</label>
            <input type="text" class="form-control" formControlName="BranchName"
              [ngClass]="{ 'is-invalid': submitted && g.BranchName.errors }">
              <div *ngIf="submitted && g.BranchName.errors" class="invalid-feedback">
                  <div *ngIf="g.BranchName.errors.required">Please Enter Branch Name</div>
                </div>
            </div>
            <div class="form-group">
                <label for="BranchName">Branch Address</label>
                <input type="text" class="form-control" formControlName="Address" [ngClass]="{ 'is-invalid': submitted &&
               g.Address.errors }">
               <div *ngIf="submitted && g.Address.errors" class="invalid-feedback">
                  <div *ngIf="g.Address.errors.required">Please Enter Branch Address</div>
                </div>
                </div>
                <div class="form-group">
                    <label for="ContactNo">Contact Number</label>
                    <input type="text" class="form-control" formControlName="ContactNo" [ngClass]="{ 'is-invalid': submitted &&
                  g.ContactNo.errors }">
                  <div *ngIf="submitted && g.ContactNo.errors" class="invalid-feedback">
                      <div *ngIf="g.ContactNo.errors.required">Please Enter contact number</div>
                    </div>
                    </div>
      
    </div>

    <div class="modal-footer">
      <button class="btn btn-square btn-primary" type="submit"
        (click)="UpdateCourseType(CourseTypeName.value)">Update</button>
      <button class="btn btn-danger btn-square ml-2" type="button" (click)="onCancel()">Cancel</button>
    </div>
    </div>
  </form>
</ng-template>