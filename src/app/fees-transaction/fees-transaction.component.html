<app-authorised-top-nav></app-authorised-top-nav>

<div class="row">
  <div class="col-md-2">
    <app-authorised-side-nav></app-authorised-side-nav>
  </div>

  <html>

  <body>
    <form [formGroup]="registerFeesTransaction" (ngSubmit)="createStudentCourse()">
      <h4>Fees Transaction</h4>
      <div class="row">
        <div class="col-md-6">

          <table>
            <tbody>

              <!-- <tr>
                <td colspan="1">
                  <label for="CourseType">Course Type</label>
                  <div class="row">
                    <div class="col">
                      <select class="form-control" formControlName="CourseType"
                        [ngClass]="{ 'is-invalid': submitFeesTransaction && g.CourseType.errors }"
                        (change)="selectUser($event);getCourseNameFromCourseType()">
                        <option *ngFor="let course of FeesTransactionService.listCourseType"
                          [value]="course.CourseTypeId">
                          {{course.CourseTypeName}}
                        </option>
                      </select>
                      <div *ngIf="submitFeesTransaction && g.CourseType.errors" class="invalid-feedback">
                        <div *ngIf="g.CourseType.errors.required">Course Type is required</div>
                      </div>
                    </div>

                  </div>
                </td>
              </tr> -->

              <tr>
                <td colspan="1"><label for="CourseName">Course Name</label>
                  <div class="form-group">
                    <select class="form-control" formControlName="CourseName"
                      [ngClass]="{ 'is-invalid': submitFeesTransaction && g.CourseName.errors }"
                      (change)="selectFees($event);getStudentListFromCourseName()">
                      <option *ngFor="let course of FeesTransactionService.listCourses" [value]="course.CourseId">
                        {{course.FullName}}</option>

                    </select>
                    <div *ngIf="submitFeesTransaction && g.CourseName.errors" class="invalid-feedback">
                      <div *ngIf="g.CourseName.errors.required">Course Name is required</div>
                    </div>
                  </div>
                </td>
              </tr>

              <!-- <tr>
                <td colspan="1">
                  <label for="StudentID">Course Fees</label>
                  <div class="form-group">
                    <select class="form-control" formControlName="CourseFees"
                      [ngClass]="{ 'is-invalid': submitFeesTransaction && g.CourseFees.errors }">
                      <option *ngFor="let course of FeesTransactionService.listCourseFees" [value]="course.Fees">
                        {{course.Fees}}
                      </option>
                    </select>
                    <div *ngIf="submitFeesTransaction && g.CourseFees.errors" class="invalid-feedback">
                      <div *ngIf="g.CourseFees.errors.required">Course Fees Required</div>
                    </div>
                  </div>
                </td>
              </tr> -->

              <tr>
                <td colspan="1">
                  <label for="StudentID">Student Name</label>
                  <div class="form-group">
                    <select class="form-control" formControlName="StudentID"
                      [ngClass]="{ 'is-invalid': submitFeesTransaction && g.StudentID.errors }"
                      (change)="selectStudent($event);getTotalFeesForStudentCourse();getFeesTransactionDetails();">
                      <option *ngFor="let student of FeesTransactionService.listStudents" [value]=" student.StudentId">
                        {{student.FullName}}
                      </option>
                    </select>
                    <div *ngIf="submitFeesTransaction && g.StudentID.errors" class="invalid-feedback">
                      <div *ngIf="g.StudentID.errors.required">Student Name Required</div>
                    </div>
                  </div>
                </td>
              </tr>


              <tr>
                <td colspan="1">
                  <label for="CourseFees">Course Fees For Student</label>
                   <div class="form-group">
                   <select class="form-control" formControlName="CourseFees"
                      [ngClass]="{ 'is-invalid': submitFeesTransaction && g.CourseFees.errors }" (change)="selectStudent($event);calculateRemainingFees()">
                      <option *ngFor="let course of FeesTransactionService.listCourseFees" [value]="course.TotalFees">
                        {{course.TotalFees}}
                      </option>
                    </select>
                    <div *ngIf="submitFeesTransaction && g.CourseFees.errors" class="invalid-feedback">
                      <div *ngIf="g.CourseFees.errors.required">Course Fees Required</div>
                    </div>
                  </div>
                 
                </td>
              </tr>


              
              <tr>
                <td colspan="1">
                    <label for="RemainingFees">Remaining Fees</label>
                      <div class="form-group">
                        <input type="text" class="form-control" formControlName="RemainingFees" disabled>
                      </div>
                </td>
            </tr>

<!-- 
              <tr>
                  <td colspan="1">
              <label for="RemainingFees">Remaining Fees</label>
              
               <div class="form-group">
                  <input type="text" class="form-control" id="RemainingFees" formControlName="RemainingFees"
                    [ngClass]="{ 'is-invalid': submitFeesTransaction && g.RemainingFees.errors }" disabled>
                    
                  
                  </div> 
                  </td>
              </tr> -->

            </tbody>
          </table>
        </div>

        <div class="col-md-6">
          <table>
            <tbody>

                <!-- <tr>
                    <td colspan="1">
                     
                      <div class="form-group" *ngFor="let fees of FeesTransactionService.listFeesTransactions">
                          <label for="FeesAmount">Already Paid Amount</label>
                        <input type="number" class="form-control" formControlName="PaidAmount"
                         [value]="fees.FeesPaid"
                          [ngClass]="{ 'is-invalid': submitFeesTransaction && g.PaidAmount.errors }" disabled>
                        <div *ngIf="submitFeesTransaction && g.PaidAmount.errors" class="invalid-feedback">
                          <div *ngIf="g.PaidAmount.errors.required">Fees Amount is required</div>
                        </div>
                      </div>
                    </td>
                  </tr> -->


              <tr>
                <td colspan="1">
                  <label for="FeesAmount">Fees Amount Paying</label>
                  <div class="form-group">
                    <input type="number" class="form-control" id="FeesAmount" formControlName="FeesAmount"
                      [ngClass]="{ 'is-invalid': submitFeesTransaction && g.FeesAmount.errors }">
                      <!-- <input type="button" *ngFor="let fees of FeesTransactionService.listFeesTransactions" value="Add" (click)="calculateTotalPaidFees(fees.FeesPaid)"> -->
                    <div *ngIf="submitFeesTransaction && g.FeesAmount.errors" class="invalid-feedback">
                      <div *ngIf="g.FeesAmount.errors.required">Fees Amount is required</div>
                    </div>
                  </div>
                </td>
              </tr>


              <!-- <tr>
                  <td colspan="1">
                    <label for="FeesAmount">Total Paid Amount</label>
                    <div class="form-group">
                      <input type="number" class="form-control" id="FeesAmount" formControlName="TotalPaidAmount"
                        [ngClass]="{ 'is-invalid': submitFeesTransaction && g.TotalPaidAmount.errors }" disabled>
                      <div *ngIf="submitFeesTransaction && g.TotalPaidAmount.errors" class="invalid-feedback">
                        <div *ngIf="g.TotalPaidAmount.errors.required">Fees Amount is required</div>
                      </div>
                    </div>
                  </td>
                </tr> -->


              <tr>
                <td colspan="1">
                  <label for="DateofPayment">Date of Payment</label>
                  <div class="form-group">
                    <input type="date" id="birthDate" class="form-control" placeholder="Date of Payment"
                      formControlName="DateofPayment"
                      [ngClass]="{ 'is-invalid': submitFeesTransaction && g.DateofPayment.errors }">
                    <div *ngIf="submitFeesTransaction && g.DateofPayment.errors" class="invalid-feedback">
                      <div *ngIf="g.DateofPayment.errors.required">Date of Payment is required</div>
                    </div>
                  </div>
                </td>
              </tr>


              <tr>
                <td colspan="1">
                  <label for="FeesTakenby">Fees Taken By</label>
                  <div class="form-group">
                    <select class="form-control" formControlName="FeesTakenBy"
                      [ngClass]="{ 'is-invalid': submitFeesTransaction && g.FeesTakenBy.errors }">
                      <option *ngFor="let user of FeesTransactionService.listUsers" [value]="user.Id">
                        {{user.FirstName}} {{user.LastName}}
                      </option>

                    </select>
                    <div *ngIf="submitFeesTransaction && g.FeesTakenBy.errors" class="invalid-feedback">
                      <div *ngIf="g.FeesTakenBy.errors.required">Fees Taken by is required</div>
                    </div>
                  </div>
                </td>
              </tr>

              

              <tr>
                <td colspan="1">
                  <div class="form-group">
                    <label for="FeesTakenby"></label>
                    <div class="form-row">
                      <button name="button1id" class="btn btn-success" id="SubmitFees">Save</button>
                      &nbsp;
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </form>
  

<div class="container" style="margin-top:50px">
<table class="table table-bordered">
  <thead>
  <tr>
    <th>InstallmentDate</th>
    <th>PaidAmount</th>
    <th>FeesTakenBy</th>
  </tr>
</thead>
<tbody>
  <tr *ngFor="let fees of FeesTransactionService.listFeesTransactions">
      
    <td>{{fees.DateOfPayment | date}}</td>
    <td>{{fees.FeesPaid}}</td>
    <td>{{fees.FeesTakenBy}}</td>
  </tr>
  
</tbody>
</table>
</div>

</body>

</html>
</div>
<!-- <ng-template #feesTransactionHistory  >

    <div class="modal-header" >

      <h1>bujbj</h1>
        <h4 class="modal-title pull-left">Installment Date</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

  <div class="modal-body" *ngFor="let fees of FeesTransactionService.listFeesTransactions">
      <tr>
          <td colspan="1"><label for="InstallmentDate">Previous Installment Date</label>
            <div class="form-group" >
              <input type="text" [value]="fees.DateOfPayment" disabled>
            </div>
          </td>
        </tr>

        <tr>
            <td colspan="1"><label for="InstallmentDate">Amount Paid(Rs)</label>
              <div class="form-group" >  
                <input type="text" [value]="fees.FeesPaid" disabled>
              </div>
            </td>
          </tr>

  </div>
</ng-template> -->